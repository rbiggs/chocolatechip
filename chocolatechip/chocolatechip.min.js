/*
ChocolateChip.js: It's tiny but delicious
A JavaScript library for mobile Web app development.
 
Copyright 2012 Robert Biggs: www.choclatechip-ui.com
License: BSD
Version 2.0.0 
*/
(function(){var $=function(a,b){if(typeof a==='undefined'){return document}if(a===window||a===document){return a}if(typeof a==='object'&&a.nodeType===1){return a}if(!!b){if(typeof b==='string'){return document.querySelector(b+' '+a)}else if(b.nodeType===1){return b.querySelector(a)}}else if(typeof a==='function'){$.ready(function(){return a.call(a)})}else{return document.querySelector(a)}return this};$.extend=function(a,b,c){c=c||false;if(!b){b=a;a=$}if(Object.keys){Object.keys(b).forEach(function(p){if(b.hasOwnProperty(p)){Object.defineProperty(a,p,{value:b[p],writable:true,enumerable:c,configurable:true})}})}else{if(!b){b=a;a=this}for(var i in b){a[i]=b[i]}return a}return this};if(!Object.keys){Object.keys=function(a){var b=[],k;for(k in a){if(Object.prototype.hasOwnProperty.call(a,k)){b.push(k)}}return b}}$.extend(Array.prototype,{each:Array.prototype.forEach,eq:function(a){if(a===0||!!a){return this[a]}else{return}},is:function(b){var c=[];this.each(function(a){if(a.is(b))c.push(a)});if(c.length)return c;else return false},isnt:function(b){var c=[];this.each(function(a){if(!a.is(b))c.push(a)});if(c.length)return c;else return false},not:function(a){return this.isnt(a)},has:function(b){var c=[];this.each(function(a){if(a.has(b))c.push(a)});if(c.length)return c;else return false},hasnt:function(b){var c=[];this.each(function(a){if(a.hasNot(b))c.push(a)});if(c.length)return c;else return false},hasNot:function(a){return this.hasnt(a)},prependTo:function(b){this.reverse();this.each(function(a){$(b).prepend(a)});return $(b)},appendTo:function(b){this.each(function(a){$(b).append(a)});return $(b)}});$.extend({version:'2.0.0',libraryName:'ChocolateChip',slice:Array.prototype.slice,$$:function(a,b){if(!!b){if(typeof b==='string'){return $.slice.apply(document.querySelectorAll(b+' '+a))}else if(b.nodeType===1){return $.slice.apply(b.querySelectorAll(a))}}else{return $.slice.apply(document.querySelectorAll(a))}},make:function(a){var b=document.createElement('div');b.innerHTML=a;return $.slice.apply(b.childNodes)},html:function(a){return this.make(a)},replace:function(a,b){b.parentNode.replaceChild(a,b)},require:function(a,b){b=b||$.noop;var c=document.createElement('script');c.setAttribute('type','text/javascript');c.setAttribute('src',a);c.onload=c.onreadystatechange=function(){if(!c.readyState||c.readyState==='complete'){b.apply(b,arguments)}};$('head').insert(c,'last')},processJSON:function(b,c){if(c!=null||c!=undefined){c='var '+c+' = '}else{c='var data = '}var d=document.createElement('script');d.setAttribute('type','text/javascript');var e=$.UIUuid();d.setAttribute('id',e);d.html(c+b);$('head').append(d);$.defer(function(){var a='#'+e;$(a).remove()})},noop:function(){},concat:function(a){if(a instanceof Array){return a.join('')}else{a=$.slice.apply(arguments);return String.prototype.concat.apply(a.join(''))}},w:function(a){return a.split(' ')},isArray:function(a){return Array.isArray(a)},isFunction:function(a){return Object.prototype.toString.call(a)==='[object Function]'},isObject:function(a){return Object.prototype.toString.call(a)==='[object Object]'},uuidNum:function(){return((1+Math.random())*0x100000000)},makeUuid:function(){return $.concat("chch_",$.uuid)},uuid:0,chch_cache:{}});$.uuid=$.uuidNum();$.chch_cache.data={};$.chch_cache.events={};$.extend($.chch_cache.events,{keys:[],values:[],set:function(a,b,c,d){var e;var f;var g;var h=this.values.length>0?this.values.length-1:0;var i;if(!!a.id){e=a.id}else{++$.uuid;e=$.makeUuid();a.setAttribute("id",e)}if(this.keys.indexOf(e)>=0){this.values[h].push([]);i=this.values[h];i.push(b);i.push(c);i.push(d);a.addEventListener(b,c,d)}else{this.keys.push(e);this.values.push([]);h=this.values.length-1;this.values[h].push([]);i=this.values[h];i[0].push(b);i[0].push(c);i[0].push(d);a.addEventListener(b,c,d)}},hasKey:function(a){if(this.keys.indexOf(a)>=0)return true;else return false},_delete:function(b,c,d,e){var f=this.keys.indexOf(b);var g=this.keys;var h=g[f];var i=this.values;var j=[];if(!b){return}if(typeof c==='undefined'){i[f].each(function(a){$("#"+b).removeEventListener(a[0],a[1],a[2]);$.chch_cache.events.keys.splice(f,1);i[f].splice(f,1)});i.splice(f,1)}if(c&&d){i[f].each(function(a){if(a[0]===c){$('#'+b).removeEventListener(a[0],a[1],a[2]);$.chch_cache.events.values.splice(f,1);$.chch_cache.events.keys.splice(f,1)}})}if(c&&typeof d==='undefined'){this.values[f].each(function(a){if(a[0]===c){$('#'+b).removeEventListener(a[0],a[1],a[2]);$.chch_cache.events.values.splice(f,1);$.chch_cache.events.keys.splice(f,1)}})}}});$.extend(Object.prototype,{each:function(a){for(key in this){if(a(key,this[key])===false){return this}}return this},key:function(a){var b;var c=0;for(key in this){if(a===c){return b=key}else{c++}}if(b)return b}},false);$.extend(HTMLElement.prototype,{data:function(a,b){if(a=='undefined'||a==null){return}if(a&&!b){var c=this.id;if(!c){return}else{try{return $.chch_cache.data[c][a]}catch(err){}}}else{if(!this.id){++$.uuid;c=$.makeUuid();this.setAttribute("id",c);$.chch_cache.data[c]={};$.chch_cache.data[c][a]=b}else{c=this.id;if(!$.chch_cache.data[c]){$.chch_cache.data[c]={};$.chch_cache.data[c][a]=b}else{$.chch_cache.data[c][a]=b}}}return this},removeData:function(a){var b=this.getAttribute('id');if(!b)return;if(!$.chch_cache.data[this.id]){return this}if(Object.keys($.chch_cache.data[b]).length==0){delete $.chch_cache.data[b]}else{delete $.chch_cache.data[b][a]}return this},find:function(a){return $(a,this)},findAll:function(a){return $$(a,this)},previous:function(){return this.previousElementSibling},prev:function(){return this.previousElementSibling},next:function(){return this.nextElementSibling},first:function(){return this.firstElementChild},last:function(){return this.lastElementChild},childElements:function(a){if(typeof a==='string'){return $.slice.apply(this.findAll(a))}else{return $.slice.apply(this.children)}},kids:function(a){return this.childElements(a)},siblings:function(b){var c=this;var d=[];if(!!b){$.slice.apply(this.parentNode.findAll(b)).filter(function(a){if(a!==c){d.push(a)}});return d}else{$.slice.apply(this.parentNode.children).filter(function(a){if(a!==c){d.push(a)}});return d}},parent:function(){return this.parentNode},ancestor:function(a){if(typeof a==='undefined'){return false}var b=new RegExp('^#');var c=new RegExp('^.');var d=null;var e=null;var p=this.parentNode;if(!p){return false}if(typeof a==='string'){a.trim()}if(typeof a==='number'){d=a||1;for(var i=1;i<d;i++){if(p.nodeName==='HTML'){return p}else{if(p!==null){p=p.parentNode}}}return p}else if(a.substr(0,1)==='.'){e=a.split('.')[1];if(p.nodeName==='BODY'){return false}if(p.hasClass(e)){return p}else{return p.ancestor(a)}}else if(a.substr(0,1)==='#'){e=a.split('#')[1];if(p.getAttribute('id')===e){return p}else{return p.ancestor(a)}}else{if(p.tagName.toLowerCase()===a){return p}else{return p.ancestor(a)}}},closest:function(a){return this.ancestor(a)},is:function(a){$this=this;if(typeof a==='string'){if(this.parentNode.findAll(a).indexOf($this)>=0)return this}else if(typeof a==='function'){if(a.call($this))return this}else if(a.length){if($.slice.apply(a).indexOf(this)!==-1)return this}else if(a.nodeType===1){if(this===a)return this}else{return false}},isnt:function(a){if(!this.is(a))return this;else return false},not:this.isnt,has:function(a){if(typeof a==='string'){if(this.find(a)){return this}}else if(a.nodeType===1){if($.slice.apply(this.children).indexOf(a)){return this}}else{return false}},hasnt:function(a){if(!this.has(a))return this;else return false},hasNot:this.hasnt,clone:function(a){if(a===true||!a){return this.cloneNode(true)}else{return this.cloneNode(false)}},wrap:function(a){var b=$.make(a);b=b[0];var c=this.clone(true);b.appendChild(c);this.after(b,this);this.remove(this);return this},unwrap:function(){if(this.parentNode.nodeName==='BODY'){return false}var a=this.cloneNode(true);$.replace(a,this.parentNode);return this},text:function(a){if(!!a||a===0){this.innerText=a;return this}else{return this.innerText}},fill:function(a){this.empty();if(typeof a==='string'){this.textContent=a}else{this.insert(a)}return this},empty:function(){this.unbind();this.textContent='';return this},remove:function(){this.unbind();this.removeData();this.parentNode.removeChild(this)},insert:function(a,b){var c='';if(typeof a==='string'){c=$.make(a)}else if(a.nodeType===1){c=[];c.push(a)}else{c=a}var i=0;var d=c.length;if(!b||b>(this.children.length+1)||b==='last'){while(i<d){this.appendChild(c[i]);i++}}else if(b===1||b==='first'){while(i<d){this.insertBefore(c[i],this.firstElementChild);i++}}else{while(i<d){this.insertBefore(c[i],this.children[b-1]);i++}}return this},html:function(a){this.innerHTML=a},prepend:function(a){if($.isArray(a))a.reverse();this.insert(a,'first')},append:function(a){this.insert(a,'last')},before:function(a){if(typeof a==='string'){a=$.make(a)}if(a.constructor===Array){var b=a.length;var i=0;while(i<b){this.parentNode.insertBefore(a[i],this);i++}}else{this.parentNode.insertBefore(a,this)}return this},after:function(a){var b=this.parentNode;if(typeof a==='string'){a=$.make(a)}if(a.constructor===Array){var i=0,len=a.length;while(i<len){if(this===b.lastChild){b.appendChild(a[i])}else{b.insertBefore(a[i],this.nextSibling)}i++}}else{b.appendChild(a)}return this},attr:function(a,b){if(!b){return this.getAttribute(a)}else{return this.setAttribute(a,b)}},prop:function(a,b){return this.attr(a,b)},removeAttr:function(a){return this.removeAttribute(a)},hasAttr:function(a){return this.hasAttribute(a)},hasClass:function(a){return new RegExp('(?:^|\\s+)'+a+'(?:\\s+|$)').test(this.className)},addClass:function(a){if(!this.hasClass(a)){this.className=[this.className,a].join(' ').replace(/^\s*|\s*$/g,'');return this}},removeClass:function(a){if(this.hasClass(a)){var b=this.className;this.className=b.replace(new RegExp('(?:^|\\s+)'+a+'(?:\\s+|$)','g'),' ').replace(/^\s*|\s*$/g,'');return this}},val:function(a){if(a){return this.value=a}else{return this.value}},disable:function(){this.addClass('disabled');this.css('{cursor: default;}');this.preventDefault();return this},enable:function(){this.removeClass('disabled');this.css('{cursor: pointer;}');return this},toggleClass:function(a,b){if(!b){if(!this.hasClass(a)){this.addClass(a)}else{this.removeClass(a)}}else if(b){if(!this.hasClass(a)){this.addClass(a);this.removeClass(b)}else{this.removeClass(a);this.addClass(b)}}return this},toggleClassName:function(a,b){return this.toggleClass(a,b)},getTop:function(){var a=this;var b=0;while(a.offsetParent){b+=a.offsetTop;a=a.offsetParent}b=b+document.body.offsetTop;return b},getLeft:function(a){a=this;var b=0;while(a.offsetParent){b+=a.offsetLeft;a=a.offsetParent}b=b+document.body.offsetLeft;return b},offset:function(){var a={};a.top=this.getTop();a.left=this.getLeft();return a},css:function(a,b){if(a instanceof Object){for(var c in a){this.style[c.camelize()]=a[c]}}else if(!b){return document.defaultView.getComputedStyle(this,null).getPropertyValue(a.toLowerCase())}else if(b){this.style[a.camelize()]=b;return this}else{return false}return this},bind:function(a,b,c){c=c||false;$.chch_cache.events.set(this,a,b,c);return this},unbind:function(a,b,c){if(!this.id||!$.chch_cache.events.hasKey(this.id)){return this}c=c||false;$.chch_cache.events._delete(this.id,a,b,c);return this},delegate:function(d,f,g,h){h=h||false;this.addEventListener(f,function(e){var c=e.target;if(e.target.nodeType==3){c=e.target.parentNode}$.$$(d,this).each(function(a){if(a===c){g.apply(this,arguments)}else{try{var b=c.ancestor(d);if(a===b){e.stopPropagation();g.call(this,b)}}catch(err){}}})},h)},undelegate:function(a,b,c,d){this.unbind(b,c,d)},trigger:function(a){if(document.createEvent){var b=document.createEvent('Events');b.initEvent(a,true,false);this.dispatchEvent(b)}},on:function(a,b,c,d){if(typeof b==='function'){this.bind(a,b,c)}else{this.delegate(b,a,c,d)}},off:function(a,b,c,d){if(typeof b==='function'){this.unbind(a,b,c)}else{this.undelegate(b,a,c,d)}},anim:function(a){var b=null;var c='-webkit-transition: all '+(a.duration+' '||'.5s ')+(a.easing+';')||'linear;';for(var d in a.values){if(d==='onEnd'){b=a.values[d];this.bind('webkitTransitionEnd',b())}else{c+=d+':'+a.values[d]+';'}}this.css(c)},UICheckForOverflow:function(){var a=this.css('overflow');if(!a||a==='visible'){this.style.overflow='hidden'}var b=this.clientWidth<this.scrollWidth||this.clientHeight<this.scrollHeight;this.css('overflow',a);return b}});$.extend(String.prototype,{capitalize:function(){var a=this;return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},capitalizeAll:function(){var b=this.split(' ');var c=[];b.each(function(a){c.push(a.capitalize())});return c.join(' ')},camelize:function(){return this.replace(/\-(.)/g,function(m,l){return l.toUpperCase()})},deCamelize:function(){return this.replace(/([A-Z])/g,'-$1').toLowerCase()}});$.extend($,{xhr:function(b){var o=b?b:{};var c=null;var d=b.error||$.noop;if(!!b){if(!!o.successCallback||!!o.success){c=o.successCallback||o.success}}var e=new XMLHttpRequest(),method=o.method||'get',async=o.async||false,params=o.data||null,i=0;e.queryString=params;e.open(method,o.url,async);if(o.headers){for(;i<o.headers.length;i++){e.setRequestHeader(o.headers[i].name,o.headers[i].value)}}e.handleResp=(c!==null)?c:$.noop;function hdl(){if(e.status===0||e.status==200&&e.readyState==4){$.responseText=e.responseText;e.handleResp(e.responseText)}else{if(!!o.errorCallback||!!o.error){var a=o.errorCallback||o.error;a(e)}}}if(async)e.onreadystatechange=hdl;e.send(params);if(!async)hdl();return this},ajax:function(a){return $.xhr(a)},xhrjson:function(b,d){if(typeof d==='undefined'){return this}var c=d.successCallback;if(typeof c!='function'){c=function(x){return x}}var e=function(){var o=eval('('+this.responseText+')');for(var a in o){$(d[a]).fill(c(o[a]))}};d.successCallback=e;d.url=b;$.xhr(d);return this},delay:function(a,b){a=a||$.noop;setTimeout(function(){a.call(a)},b)},defer:function(a){a=a||$.noop;return $.delay.apply($,[a,1].concat($.slice.call(arguments,1)))},enclose:function(b,c){return function(){var a=[b].concat($.slice.call(arguments));return c.apply(c,a)}},compose:function(){var b=$.slice.call(arguments);return function(){var a=$.slice.call(arguments);for(var i=b.length-1;i>=0;i--){a=[b[i].apply(this,a)]}return a[0]}},events:['onmousedown','onmouseup','onmouseover','onmouseout','onclick','onmousemove','ondblclick','onerror','onresize','onscroll','onkeydown','onkeyup','onkeypress','onchange','onsubmit','onload','ontouchstart','ontouchmove','ontouchend','ontouchcancel','ongesturestart','ongesturechange','ongestureend','onorientationchange'],loadEvent:function(F){var a=window.onload;if(typeof window.onload!=='function'){window.onload=F}else{window.onload=function(){a();F()}}},DOMReadyList:[],executeWhenDOMReady:function(){var a=$.DOMReadyList.length;var i=0;while(i<a){$.DOMReadyList[i]();i++}$.DOMReadyList=null;document.removeEventListener('DOMContentLoaded',$.executeWhenDOMReady,false)},ready:function(a){if(document.getElementsByTagName('body')[0]){a()}else{if($.DOMReadyList.length===0){document.addEventListener('DOMContentLoaded',$.executeWhenDOMReady,false)}$.DOMReadyList.push(a)}},UIHideURLbar:function(){window.scrollTo(0,1)},importScript:$.require,iphone:/iphone/img.test(navigator.userAgent),ipad:/ipad/img.test(navigator.userAgent),ipod:/ipod/img.test(navigator.userAgent),ios:/ip(hone|od|ad)/img.test(navigator.userAgent),android:/android/img.test(navigator.userAgent),webos:/webos/img.test(navigator.userAgent),blackberry:/blackberry/img.test(navigator.userAgent),touchEnabled:('createTouch'in document),online:navigator.onLine,standalone:navigator.standalone,ios4:navigator.userAgent.match(/OS 4/i),ios5:navigator.userAgent.match(/OS 5/i),userAction:($.touchEnabled?'touchend':'click'),mobile:/mobile/img.test(navigator.userAgent),desktop:!(/mobile/img.test(navigator.userAgent)),localItem:function(a,b){try{if(!b){try{b=localStorage.getItem(a);if(b[0]==='{'){b=JSON.parse(b)}return b}catch(e){}}if(typeof b==='object'){b=JSON.stringify(b)}localStorage.setItem(a,b)}catch(err){if(e==='QUOTA_EXCEEDED_ERR'){console.error('Quota exceeded for localStorage!')}}return this},deleteLocalItem:function(a){try{localStorage.removeItem(a)}catch(e){}},clearLocalItems:function(){localStorage.clear()},templates:{},template:function(c,d){if($.ajaxStatus===null||$.ajaxStatus===false){return d}if($.templates[c]){c=$.templates[c]}else{c=c}var e='var p=[],print=function(){p.push.apply(p,arguments);};with(obj||{}){p.push(\'';var f;var g;if(/\{\{/.test(c)||(/$\{/).test(c)){f=/\$\{([\s\S]+?)\}/g;g=/\{\{([\s\S]+?)\}\}/g}else if(/\[\[/.test(c)||(/$\[/).test(c)){f=/\$\[([\s\S]+?)\]/g;g=/\[\[([\s\S]+?)\]\]/g}else if(/<%=/.test(c)||(/<%/).test(c)){f=/<%=([\s\S]+?)%>/g;g=/<%([\s\S]+?)%>/g}e+=c.replace(/\\/g,'\\\\').replace(/'/g,"\\'").replace(f,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(g||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g,' ')+"p.push('"}).replace(/\r/g,'\\r').replace(/\n/g,'\\n').replace(/\t/g,'\\t')+"');} return p.join('');";var h=new Function('obj',e);return d?h(d):h},UIUpdateOrientationChange:function(){var a=$('body');if(window.innerWidth<window.innerHeight){a.removeClass('landscape');a.addClass('portrait');$.UIHideURLbar()}else{a.removeClass('portrait');a.addClass('landscape');$.UIHideURLbar()}document.addEventListener('orientationchange',function(){if(window.orientation===0||window.orientation===180){a.removeClass('landscape');a.addClass('portrait');$.UIHideURLbar()}else{a.removeClass('portrait');a.addClass('landscape');$.UIHideURLbar()}$.UIHideURLbar()},false)},UIListenForWindowResize:function(){var a=$('body');window.addEventListener('resize',function(){if(window.innerHeight>window.innerWidth){a.removeClass('landscape');a.addClass('portrait');$.UIHideURLbar()}else{a.removeClass('portrait');a.addClass('landscape');$.UIHideURLbar()}},false)},kvo:function(){this.registerObserver=function(a,b){if(typeof this.observers==='undefined'){this.observers={}}if(typeof this.observers[b]==='undefined'){this.observers[b]=[a]}else{this.observers[b].push(a)}};this.set=function(b,c){if(this.observers!==null&&this.observers[b]!==null){currentValue=this[b];this.observers[b].each(function(a){a.keyWillUpdate(this,b,currentValue,c)});this[b]=c}}},form2JSON:function(i,k){i=typeof i=='string'?$(i):i;k=k||'.';var l=getFormValues(i);var m={};var n={};function getFormValues(a){var b=[];var c=a.firstChild;while(c){if(c.nodeName.match(/INPUT|SELECT|TEXTAREA/i)){b.push({name:c.name,value:getFieldValue(c)})}else{var d=getFormValues(c);b=b.concat(d)}c=c.nextSibling}return b}function getFieldValue(a){if(a.nodeName==='INPUT'){if(a.type.toLowerCase()==='radio'||a.type.toLowerCase()==='checkbox'){if(a.checked){return a.value}}else{if(!a.type.toLowerCase().match(/button|reset|submit|image/i)){return a.value}}}else{if(a.nodeName==='TEXTAREA'){return a.value}else{if(a.nodeName==='SELECT'){return getSelectedOptionValue(a)}}}return''}function getSelectedOptionValue(b){var c=b.multiple;if(!c){return b.value}if(b.selectedIndex>-1){var d=[];$$('option',b).each(function(a){if(a.selected){d.push(a.value)}});return d}}l.each(function(a){var b=a.value;if(b!==''){var c=a.name;var d=c.split(k);var e=m;for(var j=0;j<d.length;j++){var f=d[j];var g;if(f.indexOf('[]')>-1&&j==d.length-1){g=f.substr(0,f.indexOf('['));if(!e[g])e[g]=[];e[g].push(b)}else{if(f.indexOf('[')>-1){g=f.substr(0,f.indexOf('['));var h=f.replace(/^[a-z]+\[|\]$/gi,'');if(!n[g]){n[g]={}}if(!e[g]){e[g]=[]}if(j==d.length-1){e[g].push(b)}else{if(!n[g][h]){e[g].push({});n[g][h]=e[g][e[g].length-1]}}e=n[g][h]}else{if(j<d.length-1){if(!e[f]){e[f]={}}e=e[f]}else{e[f]=b}}}}}});return m}});$.extend(document,{ready:function(a){a=a||$.noop;if(document.getElementsByTagName('body')[0]){a()}else{$.ready(a)}}});window.$chocolatechip=$;window.$$chocolatechip=$.$$;if(typeof window.$==='undefined'){window.$chocolatechip=window.$=$;window.$$chocolatechip=window.$$=$.$$}})();$(function(){$.UIUpdateOrientationChange();$.UIListenForWindowResize();if(!Function.prototype.bind){$.extend(Function.prototype,{bind:function(a,b){var c=$.slice.call(arguments,2);return function(){return a.apply(b||{},c.concat($.slice.call(arguments)))}}})}});